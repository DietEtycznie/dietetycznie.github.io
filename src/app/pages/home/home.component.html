<main>
  <!-- Sekcja powitalna -->
  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <h1>Znajdź odpowiednią dietę dla swojego zdrowia</h1>
        <p>
          Spersonalizowane plany żywieniowe i przepisy dopasowane do Twoich
          potrzeb zdrowotnych
        </p>
        <div class="hero-buttons">
          <a routerLink="/conditions" class="btn-primary">Znajdź swoją dietę</a>
          <a routerLink="/recipes" class="btn-secondary">Przeglądaj przepisy</a>
        </div>
      </div>
    </div>
  </section>

  <section class="section conditions-section">
    <div class="container">
      <h2 class="section-title">Przeglądaj według schorzenia</h2>
      <p class="section-subtitle">
        Znajdź diety i przepisy odpowiednie dla Twojego stanu zdrowia
      </p>

      <div class="conditions-grid">
        <div *ngIf="medicalConditions.length === 0" class="loading">
          <p>Ładowanie schorzeń...</p>
        </div>

        <a
          *ngFor="let condition of medicalConditions"
          [routerLink]="['/conditions', condition.id]"
          class="condition-card"
        >
          <div class="condition-icon">
            <!-- Placeholder for condition icon -->
            <span class="icon-placeholder"></span>
          </div>
          <h3>{{ condition.name }}</h3>
          <p>
            {{ condition.description | slice: 0 : 100
            }}{{ condition.description.length > 100 ? "..." : "" }}
          </p>
        </a>
      </div>

      <div class="view-all">
        <a routerLink="/conditions" class="btn-text"
          >Zobacz wszystkie schorzenia <span class="arrow">→</span></a
        >
      </div>
    </div>
  </section>

  <!-- Featured Recipes Section -->
  <section class="section recipes-section">
    <div class="container">
      <h2 class="section-title">Polecane przepisy</h2>
      <p class="section-subtitle">
        Zdrowe i smaczne przepisy dla różnych schorzeń
      </p>

      <div class="recipes-grid">
        <div *ngIf="featuredRecipes.length === 0" class="loading">
          <p>Ładowanie przepisów...</p>
        </div>

        <a
          *ngFor="let recipe of featuredRecipes"
          [routerLink]="['/recipes', recipe.id]"
          class="recipe-card"
        >
          <div
            class="recipe-image"
            [ngStyle]="{
              'background-image':
                'url(' +
                (recipe.imageUrl ||
                  'https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1') +
                ')',
            }"
          ></div>
          <div class="recipe-content">
            <h3>{{ recipe.name }}</h3>
            <p>
              {{ recipe.description | slice: 0 : 100
              }}{{ recipe.description.length > 100 ? "..." : "" }}
            </p>
            <div class="recipe-meta">
              <span class="calories">{{ recipe.calories }} kcal</span>
              <span class="time"
                >{{ recipe.prepTimeMinutes + recipe.cookTimeMinutes }} min</span
              >
            </div>
          </div>
        </a>
      </div>

      <div class="view-all">
        <a routerLink="/recipes" class="btn-text"
          >Zobacz wszystkie przepisy <span class="arrow">→</span></a
        >
      </div>
    </div>
  </section>

  <!-- How It Works Section -->
  <section class="section how-it-works-section">
    <div class="container">
      <h2 class="section-title">Jak to działa</h2>
      <p class="section-subtitle">
        Proste kroki do znalezienia spersonalizowanego jadłospisu
      </p>

      <div class="steps-grid">
        <div class="step-card">
          <div class="step-number">1</div>
          <h3>Wybierz swoje schorzenie</h3>
          <p>Wybierz swoje schorzenie z naszej obszernej listy</p>
        </div>

        <div class="step-card">
          <div class="step-number">2</div>
          <h3>Zobacz zalecenia dietetyczne</h3>
          <p>
            Otrzymaj spersonalizowane wytyczne żywieniowe dla swoich potrzeb
            zdrowotnych
          </p>
        </div>

        <div class="step-card">
          <div class="step-number">3</div>
          <h3>Przeglądaj odpowiednie przepisy</h3>
          <p>Odkrywaj przepisy bezpieczne i korzystne dla Twojego schorzenia</p>
        </div>

        <div class="step-card">
          <div class="step-number">4</div>
          <h3>Stwórz swój plan posiłków</h3>
          <p>Zapisz ulubione przepisy i stwórz własny plan posiłków</p>
        </div>
      </div>

      <div class="cta-container">
        <a
          [routerLink]="(user$ | async) ? '/conditions' : '/register'"
          class="btn-primary"
          >Rozpocznij teraz</a
        >
      </div>
    </div>
  </section>
</main>
