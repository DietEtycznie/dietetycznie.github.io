<main>
  <!-- Sekcja powitalna -->
  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <h1>Znajdź odpowiednią dietę dla swojego zdrowia</h1>
        <p>
          Spersonalizowane plany żywieniowe i przepisy dopasowane do Twoich
          potrzeb zdrowotnych
        </p>
        <div class="hero-buttons">
          <a routerLink="/conditions" class="btn-primary">Znajdź swoją dietę</a>
          <a routerLink="/recipes" class="btn-secondary">Przeglądaj przepisy</a>
        </div>
      </div>
    </div>
  </section>

  <section class="section conditions-section">
    <div class="container">
      <h2 class="section-title">Przeglądaj według choroby dietozależnej</h2>
      <p class="section-subtitle">
        Znajdź diety i przepisy odpowiednie dla Twojego stanu zdrowia
      </p>

      <div class="conditions-grid">
        <div *ngIf="medicalConditions.length === 0" class="loading">
          <p>Ładowanie chorób dietozależnych...</p>
        </div>

        <a
          *ngFor="let condition of medicalConditions"
          [routerLink]="['/conditions', condition.id]"
          class="condition-card"
        >
          <div class="condition-icon">
            <!-- Placeholder for condition icon -->
            <span class="icon-placeholder"></span>
          </div>
          <h3>{{ condition.name }}</h3>
          <p>
            {{ condition.description | slice: 0 : 100
            }}{{ condition.description.length > 100 ? "..." : "" }}
          </p>
        </a>
      </div>

      <div class="view-all">
        <a routerLink="/conditions" class="btn-text"
          >Zobacz wszystkie choroby dietozależne <span class="arrow">→</span></a
        >
      </div>
    </div>
  </section>

  <!-- Featured Recipes Section -->
  <section class="section recipes-section">
    <div class="container">
      <h2 class="section-title">Polecane przepisy</h2>
      <p class="section-subtitle">
        Zdrowe i smaczne przepisy dla różnych chorób dietozależnych
      </p>

      <div class="recipes-grid">
        <div *ngIf="featuredRecipes.length === 0" class="loading">
          <p>Ładowanie przepisów...</p>
        </div>

        <a
          *ngFor="let recipe of featuredRecipes"
          [routerLink]="['/recipes', recipe.uid]"
          class="recipe-card"
        >
          <div class="recipe-image">
            <img
              [src]="getRecipeImageUrl(recipe)"
              (error)="handleImageError($event)"
              alt="Zdjęcie przepisu"
              class="recipe-img"
            />
          </div>
          <div class="recipe-content">
            <h3>{{ recipe.name }}</h3>
            <p>
              {{ recipe.description | slice: 0 : 100
              }}{{ recipe.description.length > 100 ? "..." : "" }}
            </p>
            <div class="recipe-meta">
              <span class="calories">{{ recipe.calories }} kcal</span>
              <span class="time">{{ recipe.prepTimeMinutes }} min</span>
            </div>
          </div>
        </a>
      </div>

      <div class="view-all">
        <a routerLink="/recipes" class="btn-text"
          >Zobacz wszystkie przepisy <span class="arrow">→</span></a
        >
      </div>
    </div>
  </section>

  <!-- How It Works Section -->
  <section class="section how-it-works-section">
    <div class="container">
      <h2 class="section-title">Jak to działa</h2>
      <p class="section-subtitle">
        Proste kroki do znalezienia spersonalizowanego jadłospisu
      </p>

      <div class="steps-grid">
        <div class="step-card">
          <div class="step-number">1</div>
          <h3>Wybierz swoją chorobę dietozależą</h3>
          <p>Wybierz swoją chorobę dietozależną z naszej obszernej listy</p>
        </div>

        <div class="step-card">
          <div class="step-number">2</div>
          <h3>Zobacz zalecenia dietetyczne</h3>
          <p>
            Otrzymaj spersonalizowane wytyczne żywieniowe dla swoich potrzeb
            zdrowotnych
          </p>
        </div>

        <div class="step-card">
          <div class="step-number">3</div>
          <h3>Przeglądaj odpowiednie przepisy</h3>
          <p>
            Odkrywaj przepisy korzystne i bezpieczne dla Twojego stanu zdrowia
          </p>
        </div>

        <div class="step-card">
          <div class="step-number">4</div>
          <h3>Stwórz swój plan posiłków</h3>
          <p>Zapisz ulubione przepisy i stwórz własny plan posiłków</p>
        </div>
      </div>

      <div class="cta-container">
        <a
          [routerLink]="(user$ | async) ? '/conditions' : '/register'"
          class="btn-primary"
          >Rozpocznij teraz</a
        >
      </div>
    </div>
  </section>
</main>
