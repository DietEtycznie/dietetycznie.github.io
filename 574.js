"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[574],{6751:(E,v,i)=>{i.r(v),i.d(v,{RecipeDetailsComponent:()=>h});var e=i(4438),s=i(3152),M=i(7024),_=i(177),O=i(4528),m=i(1801),t=i(6697),f=i(2073);function r(a,C){1&a&&(e.j41(0,"mat-icon",22),e.EFF(1,"favorite_border"),e.k0s())}function o(a,C){1&a&&(e.j41(0,"mat-icon",23),e.EFF(1,"favorite"),e.k0s())}function d(a,C){if(1&a){const n=e.RV6();e.j41(0,"div",19),e.bIt("click",function(){e.eBV(n);const p=e.XpG(2);return e.Njj(p.toggleLike())}),e.DNE(1,r,2,0,"mat-icon",20)(2,o,2,0,"mat-icon",21),e.k0s()}if(2&a){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",!n.like),e.R7$(),e.Y8G("ngIf",n.like)}}function c(a,C){if(1&a){const n=e.RV6();e.j41(0,"div",16)(1,"img",17),e.bIt("error",function(p){e.eBV(n);const R=e.XpG();return e.Njj(R.handleImageError(p))}),e.k0s(),e.DNE(2,d,3,2,"div",18),e.nI1(3,"async"),e.k0s()}if(2&a){const n=e.XpG();e.R7$(),e.Y8G("src",null==n.recipe?null:n.recipe.imageUrl,e.B4B),e.R7$(),e.Y8G("ngIf",e.bMT(3,2,n.user$))}}function l(a,C){if(1&a&&(e.j41(0,"div",24)(1,"div",25)(2,"span",26),e.EFF(3,"Kalorie:"),e.k0s(),e.j41(4,"span",27),e.EFF(5),e.k0s()(),e.j41(6,"div",25)(7,"span",26),e.EFF(8,"Bia\u0142ko:"),e.k0s(),e.j41(9,"span",27),e.EFF(10),e.k0s()(),e.j41(11,"div",25)(12,"span",26),e.EFF(13,"T\u0142uszcze:"),e.k0s(),e.j41(14,"span",27),e.EFF(15),e.k0s()(),e.j41(16,"div",25)(17,"span",26),e.EFF(18,"W\u0119gle:"),e.k0s(),e.j41(19,"span",27),e.EFF(20),e.k0s()(),e.j41(21,"div",25)(22,"span",26),e.EFF(23,"S\xf3d:"),e.k0s(),e.j41(24,"span",27),e.EFF(25),e.k0s()(),e.j41(26,"div",25)(27,"span",26),e.EFF(28,"B\u0142onnik:"),e.k0s(),e.j41(29,"span",27),e.EFF(30),e.k0s()()()),2&a){const n=e.XpG();e.R7$(5),e.JRh(n.recipe.calories),e.R7$(5),e.SpI("",n.recipe.protein," g"),e.R7$(5),e.SpI("",n.recipe.fat," g"),e.R7$(5),e.SpI("",n.recipe.carbs," g"),e.R7$(5),e.SpI("",n.recipe.sodium," mg"),e.R7$(5),e.SpI("",n.recipe.fiber," g")}}function g(a,C){if(1&a&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&a){const n=C.$implicit;e.R7$(),e.JRh(n)}}function P(a,C){if(1&a&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&a){const n=C.$implicit;e.R7$(),e.JRh(n)}}let h=(()=>{class a{constructor(){this.recipe=null,this.like=!1,this.tags=[],this.route=(0,e.WQX)(s.nX),this.recipeService=(0,e.WQX)(M.S),this.userService=(0,e.WQX)(f.D),this.user$=this.userService.currentUser$.pipe()}ngOnInit(){const n=this.route.snapshot.paramMap.get("uid");n&&this.recipeService.getRecipeById(n).subscribe(u=>{this.tags=[...u.mealType||[],...u.suitableForConditions||[],...u.dietTags||[]],this.recipe=u}),this.user$.pipe((0,t.s)(1)).subscribe(u=>{u&&this.recipe?.uid&&(this.like=!!u.savedRecipes?.includes(this.recipe.uid))})}handleImageError(n){n.target.src="../../../assets/recipes/fallback-plate.png"}toggleLike(){this.like=!this.like,this.user$.pipe((0,t.s)(1)).subscribe(n=>{n&&(!this.recipe||!this.recipe.uid||(this.like?this.userService.addSavedRecipe(n.uid,this.recipe.uid).subscribe():this.userService.removeSavedRecipe(n.uid,this.recipe.uid).subscribe()))})}getPortionText(n){if(!n||n>=11&&n<=19)return"porcji";const u=n%10;return 1===u?"porcja":u>=2&&u<=4?"porcje":"porcji"}static{this.\u0275fac=function(u){return new(u||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-recipe-details"]],standalone:!0,features:[e.aNF],decls:46,vars:18,consts:[[1,"recipe-details"],[1,"image-meta-col"],["class","image-wrapper",4,"ngIf"],[1,"under-image-meta"],[1,"meta-row"],[1,"meta-item"],["color","primary"],[1,"conditions-row"],[3,"list"],[1,"main-content"],[1,"recipe-title"],[1,"description"],["class","nutrition",4,"ngIf"],[1,"ingredients"],[4,"ngFor","ngForOf"],[1,"instructions"],[1,"image-wrapper"],["alt","Zdj\u0119cie przepisu",3,"error","src"],["class","like-button",3,"click",4,"ngIf"],[1,"like-button",3,"click"],["class","favorite-icon",4,"ngIf"],["class","favorite-icon red",4,"ngIf"],[1,"favorite-icon"],[1,"favorite-icon","red"],[1,"nutrition"],[1,"nutrition-item"],[1,"label"],[1,"value"]],template:function(u,p){1&u&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,c,4,4,"div",2),e.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"mat-icon",6),e.EFF(7,"schedule"),e.k0s(),e.j41(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"div",5)(11,"mat-icon",6),e.EFF(12,"restaurant"),e.k0s(),e.j41(13,"span"),e.EFF(14),e.k0s()(),e.j41(15,"div",5)(16,"mat-icon",6),e.EFF(17,"event"),e.k0s(),e.j41(18,"span"),e.EFF(19),e.nI1(20,"date"),e.k0s()(),e.j41(21,"div",5)(22,"mat-icon",6),e.EFF(23,"update"),e.k0s(),e.j41(24,"span"),e.EFF(25),e.nI1(26,"date"),e.k0s()()(),e.j41(27,"div",7),e.nrm(28,"app-pills",8),e.k0s()()(),e.j41(29,"div",9)(30,"h2",10),e.EFF(31),e.k0s(),e.j41(32,"div",11)(33,"p"),e.EFF(34),e.k0s()(),e.DNE(35,l,31,6,"div",12),e.j41(36,"div",13)(37,"h3"),e.EFF(38,"Sk\u0142adniki"),e.k0s(),e.j41(39,"ul"),e.DNE(40,g,2,1,"li",14),e.k0s()(),e.j41(41,"div",15)(42,"h3"),e.EFF(43,"Przygotowanie"),e.k0s(),e.j41(44,"ol"),e.DNE(45,P,2,1,"li",14),e.k0s()()()()),2&u&&(e.R7$(2),e.Y8G("ngIf",null==p.recipe?null:p.recipe.imageUrl),e.R7$(7),e.SpI("",null==p.recipe?null:p.recipe.prepTimeMinutes," min"),e.R7$(5),e.Lme("",null==p.recipe?null:p.recipe.servings," ",p.getPortionText(null==p.recipe?null:p.recipe.servings),""),e.R7$(5),e.SpI("Dodano: ",e.i5U(20,12,null==p.recipe?null:p.recipe.createdAt,"mediumDate"),""),e.R7$(6),e.SpI("Aktualizacja: ",e.i5U(26,15,null==p.recipe?null:p.recipe.updatedAt,"mediumDate"),""),e.R7$(3),e.Y8G("list",p.tags),e.R7$(3),e.JRh(null==p.recipe?null:p.recipe.name),e.R7$(3),e.JRh(null==p.recipe?null:p.recipe.description),e.R7$(),e.Y8G("ngIf",p.recipe),e.R7$(5),e.Y8G("ngForOf",null==p.recipe?null:p.recipe.ingredients),e.R7$(5),e.Y8G("ngForOf",null==p.recipe?null:p.recipe.instructions))},dependencies:[_.MD,_.Sq,_.bT,_.Jj,_.vh,O.e,m.An],styles:[".recipe-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:380px 1fr;gap:48px;align-items:flex-start;max-width:1200px;margin:48px auto 0}.recipe-details[_ngcontent-%COMP%]   .image-meta-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:24px}.recipe-details[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;align-items:flex-start;justify-content:center;position:relative}.recipe-details[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-width:500px;height:auto;aspect-ratio:1/1;object-fit:cover;border-radius:10px;border:3px solid #f9f9f9}.recipe-details[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .like-button[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;z-index:2}.recipe-details[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .like-button[_ngcontent-%COMP%]:hover{transform:scale(1.1);background-color:#fff}.recipe-details[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .like-button[_ngcontent-%COMP%]   .favorite-icon[_ngcontent-%COMP%]{font-size:24px;color:#757575}.recipe-details[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .like-button[_ngcontent-%COMP%]   .favorite-icon.red[_ngcontent-%COMP%]{color:#e53935}.recipe-details[_ngcontent-%COMP%]   .under-image-meta[_ngcontent-%COMP%]{margin-top:18px;display:flex;flex-direction:column;gap:18px}.recipe-details[_ngcontent-%COMP%]   .under-image-meta[_ngcontent-%COMP%]   .meta-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px 24px}.recipe-details[_ngcontent-%COMP%]   .under-image-meta[_ngcontent-%COMP%]   .meta-row[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:1.08rem;color:#444}.recipe-details[_ngcontent-%COMP%]   .under-image-meta[_ngcontent-%COMP%]   .meta-row[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.15rem}.recipe-details[_ngcontent-%COMP%]   .under-image-meta[_ngcontent-%COMP%]   .tags-row[_ngcontent-%COMP%]{margin-top:6px}.recipe-details[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px;padding-top:0}.recipe-details[_ngcontent-%COMP%]   .recipe-title[_ngcontent-%COMP%]{font-size:2.6rem;font-weight:800;margin-bottom:12px;color:#222;letter-spacing:-1px}.recipe-details[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{padding:12px 5px}.recipe-details[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:1.18rem;color:#4a4a4a;font-weight:700}.recipe-details[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#2d2d2d;font-size:1.12rem}.recipe-details[_ngcontent-%COMP%]   .ingredients[_ngcontent-%COMP%], .recipe-details[_ngcontent-%COMP%]   .instructions[_ngcontent-%COMP%]{background:#f7f7fa;border-radius:12px;padding:22px 32px}.recipe-details[_ngcontent-%COMP%]   .ingredients[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .recipe-details[_ngcontent-%COMP%]   .instructions[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:1.18rem;color:#4a4a4a;font-weight:700}.recipe-details[_ngcontent-%COMP%]   .ingredients[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .recipe-details[_ngcontent-%COMP%]   .ingredients[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%], .recipe-details[_ngcontent-%COMP%]   .instructions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .recipe-details[_ngcontent-%COMP%]   .instructions[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0;padding-left:20px;color:#2d2d2d;font-size:1.08rem}.recipe-details[_ngcontent-%COMP%]   .conditions-row[_ngcontent-%COMP%]{margin-top:8px}.recipe-details[_ngcontent-%COMP%]   .nutrition[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px 20px;background:#f7f7fa;border-radius:12px;padding:20px 32px;margin-bottom:16px;justify-content:space-between}.recipe-details[_ngcontent-%COMP%]   .nutrition[_ngcontent-%COMP%]   .nutrition-item[_ngcontent-%COMP%]{min-width:60px;width:calc(16.66% - 17px);display:flex;flex-direction:column}.recipe-details[_ngcontent-%COMP%]   .nutrition[_ngcontent-%COMP%]   .nutrition-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:1.05rem;color:#666}.recipe-details[_ngcontent-%COMP%]   .nutrition[_ngcontent-%COMP%]   .nutrition-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;color:#2d2d2d}@media (max-width: 900px){.recipe-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:28px;max-width:100vw;margin:24px 0 0;padding:0 .5rem}.recipe-details[_ngcontent-%COMP%]   .image-meta-col[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:18px}.recipe-details[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:95vw;min-width:0;border-radius:8px}.recipe-details[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{gap:20px;padding:0}.recipe-details[_ngcontent-%COMP%]   .recipe-title[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:8px}.recipe-details[_ngcontent-%COMP%]   .ingredients[_ngcontent-%COMP%], .recipe-details[_ngcontent-%COMP%]   .instructions[_ngcontent-%COMP%], .recipe-details[_ngcontent-%COMP%]   .nutrition[_ngcontent-%COMP%]{padding:14px 10px;border-radius:8px}.recipe-details[_ngcontent-%COMP%]   .nutrition[_ngcontent-%COMP%]{gap:10px 8px;padding:12px 8px}}"]})}}return a})()},3356:(E,v,i)=>{i.d(v,{R4:()=>s,cR:()=>O,q_:()=>M,vI:()=>e});const e=["Cukrzyca typu II","Nadci\u015bnienie t\u0119tnicze","Hashimoto"],s=["Wega\u0144ska","Wegetaria\u0144ska","Bezglutenowa"],M=["\u015aniadanie","Obiad","Podwieczorek","Kolacja","Przek\u0105ska"];class O{static toRecipe(t,f){const r=t.createdAt?.toDate?.()??new Date,o=t.updatedAt?.toDate?.()??new Date;return{uid:f,name:t.name??"",description:t.description??"",ingredients:t.ingredients??[],instructions:t.instructions??[],prepTimeMinutes:t.prepTimeMinutes??0,servings:t.servings??0,calories:t.calories??0,protein:t.protein??0,carbs:t.carbs??0,fat:t.fat??0,sodium:t.sodium??0,fiber:t.fiber??0,imageUrl:t.imageUrl?"../../../assets/recipes/"+t.imageUrl:"",suitableForConditions:t.suitableForConditions??void 0,dietTags:t.dietTags??void 0,createdAt:r,updatedAt:o,stars:t.stars??0,mealType:t.mealType??[]}}}},7024:(E,v,i)=>{i.d(v,{S:()=>m});var e=i(4438),s=i(4262),M=i(8455),_=i(6354),O=i(3356);let m=(()=>{class t{constructor(){this.firestore=(0,e.WQX)(s._7)}getRecipes(){const r=(0,s.rJ)(this.firestore,"recipes");return(0,M.H)((0,s.GG)(r)).pipe((0,_.T)(o=>o.docs.map(d=>O.cR.toRecipe(d.data(),d.id))))}getRecipesByCondition(r){const o=(0,s.rJ)(this.firestore,"recipes"),d=(0,s.P)(o,(0,s._M)("suitableForConditions","array-contains",r));return(0,M.H)((0,s.GG)(d)).pipe((0,_.T)(c=>c.docs.map(l=>O.cR.toRecipe(l.data(),l.id))))}getRecipeById(r){const o=(0,s.H9)(this.firestore,`recipes/${r}`);return(0,M.H)((0,s.x7)(o)).pipe((0,_.T)(d=>O.cR.toRecipe(d.data(),d.id)))}addRecipe(r){const o=(0,s.rJ)(this.firestore,"recipes"),d={...r,createdAt:new Date,updatedAt:new Date};return(0,M.H)((0,s.gS)(o,d)).pipe((0,_.T)(c=>c.id))}updateRecipe(r,o){const d=(0,s.H9)(this.firestore,`recipes/${r}`),c={...o,updatedAt:new Date};return(0,M.H)((0,s.mZ)(d,c))}deleteRecipe(r){const o=(0,s.H9)(this.firestore,`recipes/${r}`);return(0,M.H)((0,s.kd)(o))}getRecentRecipes(r=5){const o=(0,s.rJ)(this.firestore,"recipes"),d=(0,s.P)(o,(0,s.My)("createdAt","desc"),(0,s.AB)(r));return(0,M.H)((0,s.GG)(d)).pipe((0,_.T)(c=>c.docs.map(l=>O.cR.toRecipe(l.data(),l.id))))}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})()},2073:(E,v,i)=>{i.d(v,{D:()=>r});var e=i(4438),s=i(4262),M=i(6496),_=i(8455),O=i(6354),m=i(5558),t=i(8472),f=i(6697);let r=(()=>{class o{constructor(){this.firestore=(0,e.WQX)(s._7),this.authService=(0,e.WQX)(t.u),this.currentUser$=this.authService.user$.pipe((0,f.s)(1),(0,M.t)(1))}getUserById(c){const l=(0,s.H9)(this.firestore,`users/${c}`);return(0,_.H)((0,s.x7)(l)).pipe((0,O.T)(g=>{if(!g.exists())return null;const P=g.data();return{uid:P.uid??"",email:P.email??"",displayName:P.displayName,photoURL:P.photoURL,medicalConditions:P.medicalConditions,savedRecipes:P.savedRecipes,dietPlans:P.dietPlans}}))}updateUser(c,l){const g=(0,s.H9)(this.firestore,`users/${c}`);return(0,_.H)((0,s.mZ)(g,l))}addSavedRecipe(c,l){const g=(0,s.H9)(this.firestore,`users/${c}`);return(0,_.H)((0,s.x7)(g)).pipe((0,m.n)(P=>{const a=P.data().savedRecipes||[];return a.includes(l)?(0,_.H)(Promise.resolve()):(a.push(l),(0,_.H)((0,s.mZ)(g,{savedRecipes:a})))}))}removeSavedRecipe(c,l){const g=(0,s.H9)(this.firestore,`users/${c}`);return(0,_.H)((0,s.x7)(g)).pipe((0,m.n)(P=>{const C=(P.data().savedRecipes||[]).filter(n=>n!==l);return(0,_.H)((0,s.mZ)(g,{savedRecipes:C}))}))}updateMedicalConditions(c,l){const g=(0,s.H9)(this.firestore,`users/${c}`);return(0,_.H)((0,s.mZ)(g,{medicalConditions:l}))}static{this.\u0275fac=function(l){return new(l||o)}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})()},7468:(E,v,i)=>{i.d(v,{p:()=>f});var e=i(1985),s=i(3073),M=i(8750),_=i(9326),O=i(4360),m=i(6450),t=i(8496);function f(...r){const o=(0,_.ms)(r),{args:d,keys:c}=(0,s.D)(r),l=new e.c(g=>{const{length:P}=d;if(!P)return void g.complete();const h=new Array(P);let a=P,C=P;for(let n=0;n<P;n++){let u=!1;(0,M.Tg)(d[n]).subscribe((0,O._)(g,p=>{u||(u=!0,C--),h[n]=p},()=>a--,void 0,()=>{(!a||!u)&&(C||g.next(c?(0,t.e)(c,h):h),g.complete())}))}});return o?l.pipe((0,m.I)(o)):l}},6496:(E,v,i)=>{i.d(v,{t:()=>O});var e=i(1413),s=i(6129);class M extends e.B{constructor(t=1/0,f=1/0,r=s.U){super(),this._bufferSize=t,this._windowTime=f,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=f===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,f)}next(t){const{isStopped:f,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:d,_windowTime:c}=this;f||(r.push(t),!o&&r.push(d.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const f=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:o}=this,d=o.slice();for(let c=0;c<d.length&&!t.closed;c+=r?1:2)t.next(d[c]);return this._checkFinalizedStatuses(t),f}_trimBuffer(){const{_bufferSize:t,_timestampProvider:f,_buffer:r,_infiniteTimeWindow:o}=this,d=(o?1:2)*t;if(t<1/0&&d<r.length&&r.splice(0,r.length-d),!o){const c=f.now();let l=0;for(let g=1;g<r.length&&r[g]<=c;g+=2)l=g;l&&r.splice(0,l+1)}}}var _=i(7647);function O(m,t,f){let r,o=!1;return m&&"object"==typeof m?({bufferSize:r=1/0,windowTime:t=1/0,refCount:o=!1,scheduler:f}=m):r=m??1/0,(0,_.u)({connector:()=>new M(r,t,f),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}}}]);