"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[290],{6290:(M,g,a)=>{a.r(g),a.d(g,{LoginComponent:()=>F});var l=a(177),d=a(3152),i=a(9417),o=a(4438),m=a(8472);const c=n=>({invalid:n});function p(n,s){1&n&&(o.j41(0,"span"),o.EFF(1,"Email jest wymagany"),o.k0s())}function f(n,s){1&n&&(o.j41(0,"span"),o.EFF(1,"Podaj poprawny adres email"),o.k0s())}function h(n,s){if(1&n&&(o.j41(0,"div",16),o.DNE(1,p,2,0,"span",17)(2,f,2,0,"span",17),o.k0s()),2&n){let e,t;const r=o.XpG();o.R7$(),o.Y8G("ngIf",null==(e=r.loginForm.get("email"))||null==e.errors?null:e.errors.required),o.R7$(),o.Y8G("ngIf",null==(t=r.loginForm.get("email"))||null==t.errors?null:t.errors.email)}}function _(n,s){1&n&&(o.j41(0,"span"),o.EFF(1,"Has\u0142o jest wymagane"),o.k0s())}function b(n,s){1&n&&(o.j41(0,"span"),o.EFF(1,"Has\u0142o musi mie\u0107 co najmniej 6 znak\xf3w"),o.k0s())}function C(n,s){if(1&n&&(o.j41(0,"div",16),o.DNE(1,_,2,0,"span",17)(2,b,2,0,"span",17),o.k0s()),2&n){let e,t;const r=o.XpG();o.R7$(),o.Y8G("ngIf",null==(e=r.loginForm.get("password"))||null==e.errors?null:e.errors.required),o.R7$(),o.Y8G("ngIf",null==(t=r.loginForm.get("password"))||null==t.errors?null:t.errors.minlength)}}function v(n,s){if(1&n&&(o.j41(0,"div",18),o.EFF(1),o.k0s()),2&n){const e=o.XpG();o.R7$(),o.SpI(" ",e.error," ")}}let F=(()=>{class n{constructor(e,t,r,u){this.formBuilder=e,this.authService=t,this.router=r,this.route=u,this.loading=!1,this.error="",this.returnUrl="/",this.loginForm=this.formBuilder.group({email:["",[i.k0.required,i.k0.email]],password:["",[i.k0.required,i.k0.minLength(6)]]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}isFieldInvalid(e){const t=this.loginForm.get(e);return!!t&&t.invalid&&(t.dirty||t.touched)}onSubmit(){if(this.loginForm.invalid)return;this.loading=!0,this.error="";const{email:e,password:t}=this.loginForm.value;this.authService.signIn(e,t).then(()=>{this.router.navigateByUrl(this.returnUrl)}).catch(r=>{this.error=this.getErrorMessage(r)}).finally(()=>{this.loading=!1})}loginWithGoogle(){this.loading=!0,this.error="",this.authService.signInWithGoogle().then(()=>{this.router.navigateByUrl(this.returnUrl)}).catch(e=>{this.error=this.getErrorMessage(e)}).finally(()=>{this.loading=!1})}getErrorMessage(e){switch(e.code){case"auth/user-not-found":case"auth/wrong-password":return"Invalid email or password";case"auth/invalid-email":return"Please enter a valid email address";case"auth/too-many-requests":return"Too many unsuccessful login attempts. Please try again later";case"auth/popup-closed-by-user":return"Login popup was closed before authentication completed";default:return e.message||"An unexpected error occurred"}}static{this.\u0275fac=function(t){return new(t||n)(o.rXU(i.ok),o.rXU(m.u),o.rXU(d.Ix),o.rXU(d.nX))}}static{this.\u0275cmp=o.VBU({type:n,selectors:[["app-login"]],standalone:!0,features:[o.aNF],decls:28,vars:13,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-title"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control",3,"ngClass"],["class","error-message",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control",3,"ngClass"],["class","auth-error",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"auth-separator"],["type","button",1,"btn-google",3,"click","disabled"],[1,"auth-footer"],["routerLink","/register"],[1,"error-message"],[4,"ngIf"],[1,"auth-error"]],template:function(t,r){1&t&&(o.j41(0,"div",0)(1,"div",1)(2,"h1",2),o.EFF(3,"Logowanie"),o.k0s(),o.j41(4,"form",3),o.bIt("ngSubmit",function(){return r.onSubmit()}),o.j41(5,"div",4)(6,"label",5),o.EFF(7,"Email"),o.k0s(),o.nrm(8,"input",6),o.DNE(9,h,3,2,"div",7),o.k0s(),o.j41(10,"div",4)(11,"label",8),o.EFF(12,"Has\u0142o"),o.k0s(),o.nrm(13,"input",9),o.DNE(14,C,3,2,"div",7),o.k0s(),o.DNE(15,v,2,1,"div",10),o.j41(16,"button",11),o.EFF(17),o.k0s(),o.j41(18,"div",12)(19,"span"),o.EFF(20,"lub"),o.k0s()(),o.j41(21,"button",13),o.bIt("click",function(){return r.loginWithGoogle()}),o.EFF(22," Zaloguj si\u0119 przez Google "),o.k0s()(),o.j41(23,"div",14)(24,"p"),o.EFF(25,"Nie masz konta? "),o.j41(26,"a",15),o.EFF(27,"Zarejestruj si\u0119"),o.k0s()()()()()),2&t&&(o.R7$(4),o.Y8G("formGroup",r.loginForm),o.R7$(4),o.Y8G("ngClass",o.eq3(9,c,r.isFieldInvalid("email"))),o.R7$(),o.Y8G("ngIf",r.isFieldInvalid("email")),o.R7$(4),o.Y8G("ngClass",o.eq3(11,c,r.isFieldInvalid("password"))),o.R7$(),o.Y8G("ngIf",r.isFieldInvalid("password")),o.R7$(),o.Y8G("ngIf",r.error),o.R7$(),o.Y8G("disabled",r.loginForm.invalid||r.loading),o.R7$(),o.SpI(" ",r.loading?"Logowanie...":"Zaloguj si\u0119"," "),o.R7$(4),o.Y8G("disabled",r.loading))},dependencies:[l.MD,l.YU,l.bT,d.Wk,i.X1,i.qT,i.me,i.BC,i.cb,i.j4,i.JD],styles:['.auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 200px);padding:2rem 1rem;background-color:#f9f9f9}.auth-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 20px #00000014;width:100%;max-width:450px;padding:2rem}.auth-title[_ngcontent-%COMP%]{font-size:1.75rem;color:#333;margin-bottom:1.5rem;text-align:center}.auth-form[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#555;font-weight:500}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:1rem;transition:border-color .3s}.form-control[_ngcontent-%COMP%]:focus{border-color:#20b27f;outline:none}.form-control.invalid[_ngcontent-%COMP%]{border-color:#f44336}.error-message[_ngcontent-%COMP%]{color:#f44336;font-size:.85rem;margin-top:.5rem}.auth-error[_ngcontent-%COMP%]{background-color:#ffebee;color:#f44336;padding:.75rem;border-radius:4px;margin-bottom:1.5rem;font-size:.9rem}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#20b27f;color:#fff;border:none;border-radius:4px;font-size:1rem;font-weight:500;cursor:pointer;transition:background-color .3s}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#20b27f}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#b1e1cf;cursor:not-allowed}.auth-separator[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;margin:1.5rem 0;color:#777}.auth-separator[_ngcontent-%COMP%]:before, .auth-separator[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #ddd}.auth-separator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 1rem}.btn-google[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#fff;color:#555;border:1px solid #ddd;border-radius:4px;font-size:1rem;font-weight:500;cursor:pointer;transition:background-color .3s}.btn-google[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f5f5f5}.btn-google[_ngcontent-%COMP%]:disabled{background-color:#f9f9f9;color:#999;cursor:not-allowed}.auth-footer[_ngcontent-%COMP%]{text-align:center;color:#666;font-size:.9rem}.auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#57cf99;text-decoration:none;font-weight:500}.auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}']})}}return n})()}}]);